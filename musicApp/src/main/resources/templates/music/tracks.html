<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Tracks</title>
</head>
<body>

<!--로그인 여부 -->
<div th:if="${userId == null}">
    <button th:text="로그인" th:onclick="|location.href='@{/user/login}'|"></button>\
    <button th:text="카카오로그인" th:onclick="|location.href='@{https://kauth.kakao.com/oauth/authorize?response_type=code&client_id=26207dd989945bf3f623cd138fa235f8&redirect_uri=http://localhost:6080/auth/kakao/callback}'|"></button>
    <button th:text="회원가입" th:onclick="|location.href='@{/user/register}'|"></button>
</div>

<div th:unless="${userId == null}">
    <span th:text="'반갑습니다. ' + ${userId} + '님.'"></span>
    <button th:onClick="|location.href='@{/user/logout}'|" th:text="로그아웃"></button>
    <button th:onClick="|location.href='@{/music/favorite}'|" th:text="'내가 찜한 노래'"></button>
</div>

<button onclick="window.history.back()">< 뒤로가기</button>

<!-- 트랙 데이터 표시 -->
<div th:each="item : ${data}">
    <div>
        <h2 th:text="${item.name}"></h2>
        <span th:text="'  '"></span>
        <audio controls>
            <source th:src="${item.previewUrl}" type="audio/mpeg" src="">
        </audio>

        <form method="post" th:action="@{/music/tracks/{albumId}(albumId=${albumId})}">
            <input type="hidden" name="trackId" th:value="${item.id}">
            <input type="hidden" name="previewUrl" th:value="${item.previewUrl}">
            <span th:if="${userId != null}">
                <button type="submit">찜하기</button>
            </span>
        </form>

    </div>
</div>
</body>
</html>